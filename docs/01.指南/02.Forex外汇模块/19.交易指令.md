---
title: 交易指令
permalink: /pages/010219/
article: false
date: 2025-11-11 22:20:01
---

## 功能概述
交易指令功能用于用户在平台界面创建、提交、下发并最终由 MT4/MT5 客户端执行交易指令。  
整个流程分为：

1. **创建**交易指令  
2. **提交**进入待执行队列  
3. **下发**到托管端 / MT4/MT5 处理模块  
4. **执行**（MT4/MT5 客户端实际执行指令）  

用户可通过界面方便地添加新的交易指令，并在弹窗中查看每条指令的执行进度。

此功能特别适用于：
- 手动交易自动化执行  
- 托管账户下的远程下单  
- 交易管理系统自动化策略  
- 人工创建挂单/市价单批量执行  

---

# 一、主界面说明

界面主要包含三部分：

- 顶部筛选区  
- “新增指令”按钮  
- 指令列表  

截图示例如下：

```
交易账户选择器、时间筛选、搜索/重置  
+ 新增 （创建新交易指令）  
↓  
交易指令列表（包含各类字段及提交/查看按钮）
```

---

# 二、指令列表字段说明

每一条交易指令都包含以下字段：

### 1. 时间  
指令创建的时间。

### 2. 账户  
指令对应的交易账户 ID。

### 3. 操作类型（Operation Type）  
如：
- **TRADE_ACTION_DEAL**（市价单）
- **MODIFY_ORDER**（修改订单）
- **CLOSE_ORDER**（平仓）
- **DELETE_PENDING**（删除挂单）

### 4. 交易ID（Order ID）  
用于记录指令编号。

### 5. 交易品种（Symbol）  
如 EURUSD、XAUUSD。

### 6. 订单类型（Order Type）  
例如：
- BUY  
- SELL  
- BUY LIMIT  
- SELL LIMIT  
- BUY STOP  
- SELL STOP  

### 7. 交易量（Volume）  
例如 0.25、0.10 等。

### 8. 价格（Price）  
对于挂单或修改单非常重要。

### 9. 止损限制（SL）  
对应 MT4/5 的 Stop Loss。

### 10. 止损点位  
补充 SL 的数字位置信息。

### 11. 止盈点位（TP）  
对应 Take Profit。

### 12. 接受偏差（Deviation）  
市价单允许的最大滑点。

### 13. 执行类型（Execution Type）  
如：
- 立即执行  
- 定时执行  

### 14. 执行时间  
如果为定时执行，此处设定执行时间。

### 15. 终止时间  
设定挂单或定时任务的自动终止时间。

### 16. 注释（Comment）  
用户填写的备注内容。

### 17. 持仓编号（Position ID）  
用于对订单执行后的持仓进行管理。

### 18. 反向持仓编号  
用于 hedge 对冲场景。

### 19. “提交”按钮  
点击后指令进入待执行队列。

### 20. “查看”按钮  
查看指令执行历史与执行过程弹窗。

---

# 三、创建交易指令

点击 **+ 新增** 后会打开“新增交易指令”弹窗。

## 表单字段说明

### 基础信息
- **交易账户**：选择要执行指令的 MT4/MT5 账户  
- **操作类型**：如 市价单 / 挂单 / 修改单 / 平仓 等  
- **订单号**：针对修改订单、平仓指令需要填写  
- **交易品种**：如 EURUSD  

### 交易参数
- **交易量（必填）**  
- **价格**（挂单类型必填）  
- **止损限制**  
- **止损点位**  
- **止盈点位**  
- **接受偏差**  

### 执行规则
- **订单类型（必填）**  
- **执行类型**（立即执行 / 定时执行）  
- **执行时间**  
- **终止时间**  

### 其他字段
- **备注**  
- **持仓编号**  
- **反向持仓编号**  

填写完成后，点击 **提交** 指令将进入“待执行”队列。

---

# 四、指令执行流程说明

每条指令有 **四个阶段**：

```
① 创建 → ② 提交 → ③ 下发 → ④ 执行
```

点击“查看”会弹出执行流程弹窗，类似下图：

```
1   创建      2025-10-20 11:21:54  
2   提交      2025-10-20 11:22:20  
3   下发      2025-10-20 11:22:43  
4   执行      （执行完成或等待执行）
```

## 执行状态说明
- 创建：表单创建成功  
- 提交：用户点击提交后等待被客户端拉取  
- 下发：MT4/MT5 软件从待执行队列中拉取该指令  
- 执行：客户端根据指令内容执行真实交易  

若执行失败，系统会返回失败原因供用户查看。

---

# 五、指令执行机制说明（关键）

### 1. 用户创建并提交指令  
指令进入服务器端的 **待执行队列**。

### 2. MT4/MT5 客户端定时拉取指令  
托管端 EA 或 API 客户端会周期性获取最新指令。

### 3. 客户端执行指令  
根据订单类型执行下单、修改、平仓等操作。

### 4. 执行结果写回系统  
平台实时更新执行状态、持仓号、执行时间等。

---

# 六、使用场景示例

### 示例 1：用户远程买入 0.25 手 EURUSD 市价单
流程：
1. 新增指令：选择 BUY、Volume=0.25  
2. 提交  
3. 下发  
4. MT5 执行市价买单  
5. 弹窗显示执行完成  

---

### 示例 2：定时挂单
用户指定在某一时间执行 BUY LIMIT 订单。

系统会：
- 到达执行时间自动下发  
- MT4/MT5 执行挂单  
- 更新状态并通知用户  

---

### 示例 3：修改止损 / 止盈
用户提交 MODIFY_ORDER，系统下发给 MT4/MT5 更新订单。

---

# 七、注意事项

- 创建指令并不会立即执行，必须点击“提交”进入队列  
- 执行依赖 MT4/MT5 客户端是否在线  
- 若账户未托管或密码错误，则无法执行指令  
- 挂单价格必须合法，否则执行阶段会失败  
- 定时指令需确保未来时间有效  
- 执行失败会显示在弹窗中，用户可重新提交  

---

# 八、总结

交易指令功能是平台的核心下单模块，支持：

- 市价单  
- 挂单  
- 修改订单  
- 平仓 / 删除订单  
- 定时指令  
- 对冲与高级指令参数  

用户创建 → 提交 → MT4/MT5 下发 → 执行 的流程完全可视化，并可明确看到每一步状态，确保交易透明与可控。

---

<Vssue :title="$title" />
